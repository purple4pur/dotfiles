set nocompatible

colorscheme onehalflight
filetype plugin indent on
set autochdir
set autoread
set autowrite
set backspace=indent,eol,start
set clipboard+=unnamed
set complete-=i
set cursorline
set fileencodings=ucs-bom,utf-8,cp936 fileencoding=utf-8
set foldcolumn=0
set foldmethod=manual
set hidden hlsearch
set ignorecase smartcase incsearch
set listchars+=tab:>-,trail:~,extends:>,precedes:<
set mouse=a
set noerrorbells
set nofixendofline
set noshowmatch
set novisualbell
set number
set pastetoggle=<F5>
set scrolloff=1
set showcmd
set showtabline=2
set sidescroll=1
set sidescrolloff=3
set smartindent cindent autoindent
set smarttab shiftwidth=4 tabstop=4 softtabstop=4 expandtab
set splitbelow
set splitright
set t_Co=256
set t_ZH=[3m     " <C-V><ESC>[3m
set t_ZR=[23m    " <C-V><ESC>[23m
set tags+=../tags,../../tags
set textwidth=0
set virtualedit=block
syntax on

vnoremap ; :
nnoremap ; :
nnoremap j gj
nnoremap k gk
nnoremap 0 g0
nnoremap $ g$
nnoremap < <<
nnoremap > >>
nnoremap <silent> ZZ :echo "You've pressed ZZ!"<CR>
nnoremap <silent> <F9> :tabprevious<CR>
nnoremap <silent> <F10> :tabnext<CR>
nnoremap <silent> <space> za
nnoremap <silent> <C-H> <C-W>h
nnoremap <silent> <C-J> <C-W>j
nnoremap <silent> <C-K> <C-W>k
nnoremap <silent> <C-L> <C-W>l
nnoremap <silent> <leader>2t :setlocal shiftwidth=2 tabstop=2 softtabstop=2<CR>:set tabstop?<CR>
nnoremap <silent> <leader>3t :setlocal shiftwidth=3 tabstop=3 softtabstop=3<CR>:set tabstop?<CR>
nnoremap <silent> <leader>4t :setlocal shiftwidth=4 tabstop=4 softtabstop=4<CR>:set tabstop?<CR>
nnoremap <silent> <leader>8t :setlocal shiftwidth=8 tabstop=8 softtabstop=8<CR>:set tabstop?<CR>
nnoremap <silent> <leader>f :call FoldColumnToggle()<CR>:set foldcolumn?<CR>
nnoremap <silent> <leader>sf :setlocal foldmethod=syntax<CR>:set foldmethod?<CR>
nnoremap <silent> <leader>mf :setlocal foldmethod=manual<CR>:set foldmethod?<CR>
nnoremap <silent> <leader>n :nohlsearch<CR>
nnoremap <silent> <leader>l :setlocal list!<CR>:set list?<CR>
nnoremap <silent> <leader>w :setlocal wrap!<CR>:set wrap?<CR>
nnoremap <silent> <leader><C-]> :tab tag <C-R><C-W><CR>
nnoremap <leader>do :diffoff!<CR>
nnoremap <leader>dt :diffthis<CR>
nnoremap <leader>du :diffupdate!<CR>
nnoremap <leader>e :Explore<CR>
nnoremap <leader>t :Texplore<CR>
nnoremap <leader>v :Vexplore!<CR>
nnoremap <leader>T :tab terminal<CR>
tnoremap <C-\> <C-\><C-N>

" ********  map functions  ********
function! FoldColumnToggle()
    if &foldcolumn
        setlocal foldcolumn=0
    else
        setlocal foldcolumn=2
    endif
endfunction


" ********  configs  ********
if has("gui_running")
    if has("gui_win32")
        set guifont=Consolas:h11
    endif
endif


" ******************************************************
" ******************  status line  *********************
" modified from https://gist.github.com/suderman/1243665
" statusline setup
set laststatus=2
set statusline=%([%{&buflisted?bufnr('%'):''}]\ %)
set statusline+=%F\     " full filename
" display a warning if file encoding isnt utf-8
set statusline+=%#warningmsg#
set statusline+=%{(&fenc!='utf-8'&&&fenc!='')?'['.&fenc.']':''}
set statusline+=%*
set statusline+=%y      " filetype
set statusline+=%r      " read only flag
set statusline+=%m      " modified flag
" display a warning if &paste is set
set statusline+=%#error#
set statusline+=%{&paste?'[paste]':''}
set statusline+=%*
set statusline+=%=\     " left/right separator
set statusline+=%c,     " cursor column
set statusline+=%l/%L   " cursor line/total lines
set statusline+=\ %p%%  " percent through file