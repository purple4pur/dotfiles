set nocompatible

colorscheme onehalfdark
filetype plugin indent on
set autochdir
set autoread
set autowriteall
set backspace=indent,eol,start
set clipboard+=unnamed
set complete-=i
set cursorline
set fileencodings=ucs-bom,utf-8,cp936 fileencoding=utf-8
set foldcolumn=1
set foldmethod=manual
set hidden hlsearch
set ignorecase smartcase incsearch
set listchars+=tab:>-,trail:~,extends:>,precedes:<
set mouse=a
set noerrorbells
set noshowmatch
set novisualbell
set number
set pastetoggle=<F5>
set scrolloff=1
set showcmd
set showtabline=2
set smartindent cindent autoindent
set smarttab shiftwidth=4 tabstop=4 softtabstop=4 expandtab
set splitbelow
set splitright
set t_Co=256
set textwidth=0

nnoremap <silent> <space> @=((foldclosed(line('.')) < 0) ? 'zc' : 'zo')<CR>
nnoremap ; :
nnoremap j gj
nnoremap k gk
nnoremap 0 g0
nnoremap $ g$
nnoremap <silent> <leader>2t :set shiftwidth=2 tabstop=2 softtabstop=2 <CR> :echo "Set tabwidth to 2"<CR>
nnoremap <silent> <leader>3t :set shiftwidth=3 tabstop=3 softtabstop=3 <CR> :echo "Set tabwidth to 3"<CR>
nnoremap <silent> <leader>4t :set shiftwidth=4 tabstop=4 softtabstop=4 <CR> :echo "Set tabwidth to 4"<CR>
nnoremap <silent> <leader>8t :set shiftwidth=8 tabstop=8 softtabstop=8 <CR> :echo "Set tabwidth to 8"<CR>



" https://gist.github.com/suderman/1243665

" statusline setup
set laststatus=2
set statusline=%([%{&buflisted?bufnr('%'):''}]\ %)
set statusline+=%F\     " full filename

" display a warning if file encoding isnt utf-8
set statusline+=%#warningmsg#
set statusline+=%{(&fenc!='utf-8'&&&fenc!='')?'['.&fenc.']':''}
set statusline+=%*

set statusline+=%y      " filetype
set statusline+=%r      " read only flag
set statusline+=%m      " modified flag

" display a warning if &paste is set
set statusline+=%#error#
set statusline+=%{&paste?'[paste]':''}
set statusline+=%*

set statusline+=%=      " left/right separator
set statusline+=%{StatuslineCurrentHighlight()}\  " current highlight
set statusline+=%c,     " cursor column
set statusline+=%l/%L   " cursor line/total lines
set statusline+=\ %p%%  " percent through file

" return the syntax highlight group under the cursor
function! StatuslineCurrentHighlight()
    let name = synIDattr(synID(line('.'),col('.'),1),'name')
    if name == ''
        return ''
    else
        return '[' . name . ']'
    endif
endfunction
